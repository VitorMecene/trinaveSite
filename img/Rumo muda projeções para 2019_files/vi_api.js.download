!function(){"use strict";function t(t){var i,e;return 0===t.at_.forceViewport?self.innerHeight?(i=self.innerWidth,e=self.innerHeight):document.documentElement&&document.documentElement.clientHeight&&"CSS1Compat"===document.compatMode?(i=document.documentElement.clientWidth,e=document.documentElement.clientHeight):document.body&&(i=document.body.clientWidth,e=document.body.clientHeight):(i=t.at_.width,e=t.at_.height),[i,e]}var i=new(function(){return function(){this.suspendedTimeOffset=0,this.safariMode=!1,this.mobileMode=!1}}());var e=function(){function e(e,s){var a,h=this;this.VO=e,this.RE=s;try{this.startTimestamp=(new Date).getTime(),this.IOAPIOK="function"==typeof IntersectionObserver,this.basePix="https://secure-gl.imrworldwide.com/u/",this.pollspeed=100,this.suspendedTime=0,""===this.VO.at_.omSDKVersion?(this.d=window.document,this.ua=navigator.userAgent.toLowerCase()):this.ua="NA",this.uaModes=(a=this.ua,i.suspendedTimeOffset=0,i.safariMode=!1,i.mobileMode=!1,/webkit/.test(a)&&!/(chrome)/.test(a)&&(i.safariMode=!0),(i.safariMode&&(a.match(/ipad/i)||a.match(/iphone/i))||a.match(/android/i))&&(i.suspendedTimeOffset=900,i.mobileMode=!0),i),this.viewableJSscrollBlock=!1,this.viewableJSscrollMissed=!1,this.intSeries=[],this.externalTimeStamp=-1,this.previousTimeStamp=0,this.nvi_id=1e3+Math.floor(1e4*Math.random()),this.VIMeasurementDisabled=!1,this.throttlecounter=0,this.VO.at_.stopReason.code=-1,this.VO.at_.stopReason.errorCode=-1,this.VO.at_.stopReason.message="",this.renderSensorStatus=[],this.mobileZeroCount=0,this.mobileZeroCountMax=6,this.UTCSec=0,this.waitUpdate=!1,this.latestWatermark=-1,this.latestAudioWatermark=-1,this.forceAppend=!1,this.playHead=-1,this.playHeadFirstValue=-1,this.playHeadFirst=!0,this.RE&&(this.playHeadFirst=!1),this.previousPlayhead=-1,this.previousTickGapCount=0,this.omid=null,this.omsdkMode=!1,this.omsdkFirstRun=!0,this.omsdkInitCount=0,this.omsdkViewport=[],this.omsdkPlayerSize=[],this.diagnostic={ve:!1,vv:0,ut:!1,ph:-1,vo:-1,rm:!1},this.diagnosticMax=14e3,this.diagnosticMaxMsg="Diagnostic Max Length Reached";try{""===this.VO.at_.omSDKVersion&&(window.top.nielsen={},window.top.nielsen.x=0,window.top!==window&&(this.VO.at_.inIframe=!0))}catch(t){this.VO.at_.inIframe=!0}for(var n=0;n<this.VO.at_.ratio.length;n++){var o={ratio:this.VO.at_.ratio[n],series:[],next:null,count:-1,total:0,primary:0===n,observer:null};this.intSeries.push(o),this.VO.at_.totals[this.VO.at_.ratio[n]]=0}if(this.nviAddDiagnostic("VI API v"+window.nvi_APIVersion),""===this.VO.at_.omSDKVersion){this.VO.at_.viewportSize=t(this.VO);var r=this.VO.at_.viewportSize[0]+"x"+this.VO.at_.viewportSize[1];this.VO.at_.vpS.push([r,0,this.nviGetUTCSec(),0]);var d=Math.round(this.VO.at_.adNode.clientWidth)+"x"+Math.round(this.VO.at_.adNode.clientHeight);"NaNxNaN"===d&&(d="-1x-1"),this.VO.at_.esS.push([d,0,this.nviGetUTCSec(),0])}else this.VO.at_.vpS.push(["-1x-1",0,this.nviGetUTCSec(),0]),this.VO.at_.esS.push(["-1x-1",0,this.nviGetUTCSec(),0]);if(""===this.VO.at_.omSDKVersion)setTimeout(function(){h.nviSuspensionTest()},50);else this.nviInitDetection();this.nviRunLoop(this.heartbeat),this.uaModes.safariMode&&window.addEventListener("message",function(t){if(void 0!==t&&"string"==typeof t.data&&-1!==t.data.indexOf("|")){var i=t.data.split("|");i[0]===this.nvi_id.toString()&&(this.renderSensorStatus[i[2]]=0)}}.bind(this),!1)}catch(t){if(t.code=t.code?t.code:t.code=3e3,this.VO.at_.stopReason.code=2,this.VO.at_.stopReason.errorCode=t.code,this.VO.at_.stopReason.message=t.message,this.VO.triggerEvent("VIStopped"),0===this.VO.at_.silent){var p=this.basePix+"er?ca=73817&er="+t.code+"&em="+escape(window.nvi_APIVersion+"-a-"+(this.omsdkMode?"OMS":"WEB")+"-"+(this.uaModes.mobileMode?"MOB":"DSK")+"-"+(this.uaModes.safariMode?"SAF":"OTH")+"-"+t.message).substring(0,1e3)+"&r="+Math.floor(1e3*Math.random());if(""===this.VO.at_.omSDKVersion)new Image(1,1).src=p;else this.omid.sendUrl(p)}}}return e.prototype.heartbeat=function(){try{this.forceAppend=!1;var t=!1;this.latestAudioWatermark=-1,this.latestWatermark=this.nviGetLatestWatermark(),-1===this.latestWatermark&&(this.VIMeasurementDisabled?this.nviDisabledPreset():this.latestWatermark=0);var i=Math.floor(((new Date).getTime()-this.startTimestamp)/1e3);this.UTCSec=this.nviGetUTCSec();var e=0,s=!1;if(this.externalTimeStamp<i&&!this.VIMeasurementDisabled&&(s=!0,""!==this.VO.at_.omSDKVersion||this.VO.at_.inIframe||this.nviGeoChange(this.VO.at_.adNode),this.externalTimeStamp=i,1===this.VO.at_.externalTick?(this.VO.at_.resetReceived&&this.nviResetManager(),(e=this.VO.at_.tickCount)>0&&(this.waitUpdate=!1,this.diagnostic.ut=!0,this.VO.at_.tickCount=0,this.previousPlayhead=this.playHead,this.playHead=this.VO.at_.tickPlayhead[this.VO.at_.tickPlayhead.length-1],this.playHeadFirst&&this.playHead>=0&&this.nviNewSeriesSegment(),this.VO.at_.gapSegmentMode?this.nviDropGapSegment():this.nviSkipSegmentGenerator()),this.VO.at_.resetReceived&&(this.diagnostic.rm=!0,this.VO.at_.resetReceived=!1)):(e=1,this.playHead++,this.waitUpdate=!1),0===this.VO.at_.vS.length&&this.nviSetupNewVideoSeries(),0===this.VO.at_.aS.length&&this.nviSetupNewAudioSeries(e),this.diagnostic.ph=this.playHead,this.diagnostic.vv=this.latestWatermark),s&&this.omsdkMode&&this.nviOMSDKWatchdog(),!this.VIMeasurementDisabled)if(i+this.suspendedTime/1e3<this.VO.at_.timeSeriesMax){if(e>0)this.nviManageVideoSeries(),this.nviManageAudioSeries(),this.playHeadFirst&&this.playHead>=0&&(this.playHeadFirst=!1),this.previousTimeStamp=this.externalTimeStamp,t=!0;else try{s&&(this.previousTickGapCount=this.VO.at_.tickGapCount,this.VO.at_.tickGapCount++,this.VO.at_.tickOffset>1&&!this.playHeadFirst&&(this.latestAudioWatermark=this.VO.at_.tickVolume[this.VO.at_.tickVolume.length-1],void 0===this.latestAudioWatermark&&(this.latestAudioWatermark=-1),this.VO.at_.tickGapCount>this.VO.at_.tickOffset?this.VO.at_.gapSegmentMode?this.nviManageGapSegment():this.nviEnterGapSegmentMode():(this.nviUpdateVideoSeriesPreGap(),this.nviUpdateAudioSeriesPreGap())),t=!0)}catch(t){throw t.code=3014,t}s&&!this.waitUpdate&&this.nviManageViewportSeries(),s&&!this.waitUpdate&&this.nviManageElementSizeSeries(),this.nviRestartSeries(),this.nviFixCLN(),this.nviFixUTC(),s&&this.nviCalculateTotals()}else this.VO.at_.timeSeriesMaxEventFired||(this.VO.at_.timeSeriesMaxEventFired=!0,this.VO.triggerEvent("VITimeMaxReached"));t&&this.VO.triggerEvent("VIExternalDataReady"),s&&this.nviWriteDiagnostics(i),this.VO.at_.currentThreshold=this.latestWatermark,0===this.latestWatermark&&1===this.VO.at_.currentVIState&&(this.VO.at_.currentThreshold=100*this.intSeries[0].ratio),this.VO.at_.stopped?(this.VO.at_.stopReason.code=1,this.VO.at_.stopReason.errorCode=4,this.VO.at_.stopReason.message="Received stop signal",this.VO.triggerEvent("VIStopped")):this.nviRunLoop(this.heartbeat)}catch(t){t.code=t.code?t.code:t.code=3009,this.nviErrorPixel(t)}},e.prototype.nviResetManager=function(){this.VO.at_.vS=[],this.VO.at_.aS=[],this.VO.at_.vpS=[],this.VO.at_.esS=[],this.playHead=0,this.playHeadFirst=!0,this.VO.at_.tickGapCount=0,this.VO.at_.extTickCount=0,this.VO.at_.gapSegmentMode=!1;var t=this.nviGetUTCSec();this.nviAppendSeries("vS",null,[-1,this.playHead,t,0],0,!0),this.nviAppendSeries("aS",null,[-1,this.playHead,t,0],0,!0),this.VO.at_.vpS.push(["-1x-1",this.playHead,t,0]),this.VO.at_.esS.push(["-1x-1",this.playHead,t,0]),this.waitUpdate=!0},e.prototype.nviDisabledPreset=function(){this.VO.at_.vS=[],this.VO.at_.vS.push([-1,0,this.nviGetUTCSec(),0]),this.VO.at_.aS=[],this.VO.at_.aS.push([-1,0,this.nviGetUTCSec(),0]),this.VO.at_.vpS=[],this.VO.at_.vpS.push(["-1x-1",0,this.nviGetUTCSec(),0]),this.VO.at_.esS=[],this.VO.at_.esS.push(["-1x-1",0,this.nviGetUTCSec(),0])},e.prototype.nviOMSDKWatchdog=function(){this.omsdkFirstRun&&(this.omsdkInitCount++,this.omsdkInitCount<6?this.nviOmSDKSetup():(this.VIMeasurementDisabled=!0,this.VO.triggerEvent("VIOpenSDKInitError"),this.VO.triggerEvent("VINotMeasured"),this.VO.at_.stopReason.code=1,this.VO.at_.stopReason.errorCode=3,this.VO.at_.stopReason.message="Could not initialize OMSDK",this.VO.triggerEvent("VIStopped")))},e.prototype.nviDropGapSegment=function(){this.VO.at_.gapSegmentMode=!1,this.latestAudioWatermark=this.VO.at_.tickVolume[this.VO.at_.tickVolume.length-1],this.forceAppend=!this.VO.at_.bsdkMethod,this.nviAppendSeries("vS",!1,[this.latestWatermark,this.playHead,this.nviGetUTCSec(),0],0,this.forceAppend),this.nviAppendSeries("aS",!1,[this.latestAudioWatermark,this.playHead,this.nviGetUTCSec(),0],0,this.forceAppend)},e.prototype.nviSetupNewVideoSeries=function(){if(!this.uaModes.mobileMode||this.omsdkMode){var t=this.VO.at_.bsdkMethod?0:this.VO.at_.startCLN;this.nviAppendSeries("vS",!1,[-1,this.playHead,this.UTCSec,t],0,!0)}else 0!==this.latestWatermark||this.mobileZeroCount>this.mobileZeroCountMax?(this.playHead=0,t=this.VO.at_.bsdkMethod?0:this.mobileZeroCount,this.nviAppendSeries("vS",null,[-1,this.playHead,this.UTCSec-this.mobileZeroCount,t],0,!0)):this.mobileZeroCount++},e.prototype.nviSetupNewAudioSeries=function(t){var i=this.UTCSec;this.VO.at_.vS.length>0&&(i=this.VO.at_.vS[0][2]),this.forceAppend=!this.VO.at_.bsdkMethod;var e=this.VO.at_.bsdkMethod?0:this.VO.at_.startCLN;this.nviAppendSeries("aS",!1,[-1,this.playHead,i,e],0,this.forceAppend)},e.prototype.nviNewSeriesSegment=function(){try{this.playHeadFirstValue=this.playHead,this.previousPlayhead=this.playHead;var t=this.VO.at_.startCLN;this.VO.at_.tickOffset>1&&(t=this.VO.at_.startCLN-1);var i=this.nviGetUTCSec();0!==this.VO.at_.vS.length&&(this.latestWatermark=this.nviGetLatestWatermark(),-1!==this.latestWatermark||this.VIMeasurementDisabled||(this.latestWatermark=0),""===this.VO.at_.omSDKVersion&&this.nviGetDocumentHidden()&&(this.latestWatermark=0),this.VO.at_.vS[this.VO.at_.vS.length-1][0]=this.latestWatermark,this.VO.at_.vS[this.VO.at_.vS.length-1][1]=this.playHead,this.VO.at_.vS[this.VO.at_.vS.length-1][2]=i,this.VO.at_.vS[this.VO.at_.vS.length-1][3]=t),0!==this.VO.at_.aS.length&&(this.VO.at_.aS[this.VO.at_.aS.length-1][1]=this.playHead,this.VO.at_.aS[this.VO.at_.aS.length-1][2]=i,this.VO.at_.aS[this.VO.at_.aS.length-1][3]=t),0!==this.VO.at_.vpS.length&&(this.VO.at_.vpS[this.VO.at_.vpS.length-1][1]=this.playHead,this.VO.at_.vpS[this.VO.at_.vpS.length-1][2]=i,this.VO.at_.vpS[this.VO.at_.vpS.length-1][3]=t,0!==this.VO.at_.vS.length&&(this.VO.at_.vpS[this.VO.at_.vpS.length-1][2]=this.VO.at_.vS[this.VO.at_.vS.length-1][2])),0!==this.VO.at_.esS.length&&(this.VO.at_.esS[this.VO.at_.esS.length-1][1]=this.playHead,this.VO.at_.esS[this.VO.at_.esS.length-1][2]=i,this.VO.at_.esS[this.VO.at_.esS.length-1][3]=t,0!==this.VO.at_.vS.length&&(this.VO.at_.esS[this.VO.at_.esS.length-1][2]=this.VO.at_.vS[this.VO.at_.vS.length-1][2])),this.previousTimeStamp=this.externalTimeStamp}catch(t){throw t.code=3012,t}},e.prototype.nviManageVideoSeries=function(){if(0!==this.VO.at_.vS.length){this.latestWatermark=this.nviGetLatestWatermark(),-1!==this.latestWatermark||this.VIMeasurementDisabled||(this.latestWatermark=0);var t=this.VO.at_.vS.pop();if(0===this.VO.at_.vS.length&&0===t[0]&&0===t[3]&&this.latestWatermark>0&&(t[0]=this.latestWatermark),-1!==this.latestWatermark&&-1===t[0]&&(t[0]=this.latestWatermark),this.latestWatermark===t[0]||-1===this.latestWatermark){var i=this.VO.at_.tickOffset>1?1:this.playHead!==this.previousPlayhead?this.externalTimeStamp-this.previousTimeStamp:0;this.nviAppendSeries("vS",t,null,i,!1)}else{var e=this.VO.at_.bsdkMethod?0:this.externalTimeStamp-this.previousTimeStamp;this.nviAppendSeries("vS",t,[this.latestWatermark,this.playHead,this.UTCSec,e],0,!1)}}},e.prototype.nviManageAudioSeries=function(){if(this.VO.at_.tickVolume.length>0&&(this.latestAudioWatermark=this.VO.at_.tickVolume[this.VO.at_.tickVolume.length-1],this.diagnostic.vo=this.latestAudioWatermark,0!==this.VO.at_.aS.length)){var t=this.VO.at_.aS.pop();if(-1!==this.latestAudioWatermark&&-1===t[0]&&(t[0]=this.latestAudioWatermark),this.latestAudioWatermark===t[0]){var i=this.VO.at_.tickOffset>1?1:this.playHead!==this.previousPlayhead?this.externalTimeStamp-this.previousTimeStamp:0;this.nviAppendSeries("aS",t,null,i,!1)}else{this.VO.at_.bsdkMethod||(this.externalTimeStamp,this.previousTimeStamp);this.nviAppendSeries("aS",t,[this.latestAudioWatermark,this.playHead,this.UTCSec,0],0,!1)}}},e.prototype.nviEnterGapSegmentMode=function(){if(0!==this.VO.at_.vS.length){var t=this.VO.at_.vS[this.VO.at_.vS.length-1][3]-this.VO.at_.tickOffset,i=this.VO.at_.tickGapCount,e=this.UTCSec-this.VO.at_.tickGapCount+1;t<=0&&(t=this.VO.at_.vS[this.VO.at_.vS.length-1][3],i=this.VO.at_.tickGapCount-this.VO.at_.vS[this.VO.at_.vS.length-1][3],e=this.UTCSec),this.VO.at_.vS[this.VO.at_.vS.length-1][3]=t}else e=this.UTCSec,i=0;this.forceAppend=!this.VO.at_.bsdkMethod;var s=this.VO.at_.bsdkMethod?0:i;this.nviAppendSeries("vS",!1,[this.latestWatermark,this.playHead,e,s],0,this.forceAppend),t=this.VO.at_.aS[this.VO.at_.aS.length-1][3]-this.VO.at_.tickOffset,i=this.VO.at_.tickGapCount,e=this.UTCSec-this.VO.at_.tickGapCount+1,t<=0&&(t=this.VO.at_.aS[this.VO.at_.aS.length-1][3],i=this.VO.at_.tickGapCount-this.VO.at_.aS[this.VO.at_.aS.length-1][3],e=this.UTCSec),this.VO.at_.aS[this.VO.at_.aS.length-1][3]=t,this.forceAppend=!this.VO.at_.bsdkMethod,s=this.VO.at_.bsdkMethod?0:i,this.nviAppendSeries("aS",!1,[this.latestAudioWatermark,this.playHead,e,s],0,this.forceAppend),this.VO.at_.gapSegmentMode=!0},e.prototype.nviManageGapSegment=function(){var t=this.VO.at_.vS.pop();-1!==this.latestWatermark&&-1===t[0]&&(t[0]=this.latestWatermark),this.nviAppendSeries("vS",t,null,1,!1),t=this.VO.at_.aS.pop(),-1!==this.latestAudioWatermark&&-1===t[0]&&(t[0]=this.latestAudioWatermark),this.nviAppendSeries("aS",t,null,1,!1)},e.prototype.nviUpdateVideoSeriesPreGap=function(){var t=this.VO.at_.vS.pop();if(null!=t)if(0===this.VO.at_.vS.length&&0===t[0]&&0===t[3]&&this.latestWatermark>0&&(t[0]=this.latestWatermark),-1!==this.latestWatermark&&-1===t[0]&&(this.latestWatermark=t[0]),this.latestWatermark===t[0])this.nviAppendSeries("vS",t,null,1,!1);else{var i=this.VO.at_.bsdkMethod?0:1;this.nviAppendSeries("vS",t,[this.latestWatermark,this.playHead,this.UTCSec,i],0,!1)}},e.prototype.nviUpdateAudioSeriesPreGap=function(){var t=this.VO.at_.aS.pop();if(null!=t)if(-1!==this.latestAudioWatermark&&-1===t[0]&&(this.latestAudioWatermark=t[0]),this.latestAudioWatermark===t[0])this.nviAppendSeries("aS",t,null,1,!1);else{var i=this.VO.at_.bsdkMethod?0:1;this.nviAppendSeries("aS",t,[this.latestAudioWatermark,this.playHead,this.UTCSec,i],0,!1)}},e.prototype.nviSkipSegmentGenerator=function(){try{var t=-1;0!==this.VO.at_.vS.length&&(t=this.VO.at_.vS[this.VO.at_.vS.length-1][0]),(this.playHead>=this.previousPlayhead+this.VO.at_.ffThreshold||this.playHead<this.previousPlayhead)&&this.playHead!==this.previousPlayhead&&this.playHead>=0&&-1!==t&&(this.latestAudioWatermark=this.VO.at_.tickVolume[this.VO.at_.tickVolume.length-1],this.forceAppend=!this.VO.at_.bsdkMethod,this.nviAppendSeries("vS",null,[this.latestWatermark,this.playHead,this.nviGetUTCSec(),0],0,this.forceAppend),this.nviAppendSeries("aS",null,[this.latestAudioWatermark,this.playHead,this.nviGetUTCSec(),0],0,this.forceAppend),this.VO.at_.resetReceived&&(this.VO.at_.resetReceived=!1,this.VO.at_.vpS[this.VO.at_.vpS.length-1][1]=this.playHead,this.VO.at_.vpS[this.VO.at_.vpS.length-1][2]=this.nviGetUTCSec(),this.VO.at_.esS[this.VO.at_.esS.length-1][1]=this.playHead,this.VO.at_.esS[this.VO.at_.esS.length-1][2]=this.nviGetUTCSec()))}catch(t){throw t.code=3013,t}},e.prototype.nviManageViewportSeries=function(){try{this.VO.at_.viewportSize=[];var i=0,e=0;if(this.omsdkMode)i=this.omsdkViewport[0],e=this.omsdkViewport[1];else{var s=t(this.VO);i=s[0],e=s[1]}i=Math.round(i),e=Math.round(e),isNaN(i)&&(i=-1,e=-1),this.VO.at_.viewportSize.push(i),this.VO.at_.viewportSize.push(e);var a=i+"x"+e;if("-1x-1"===this.VO.at_.vpS[0][0])this.VO.at_.vpS[0][0]=a;else a===this.VO.at_.vpS[this.VO.at_.vpS.length-1][0]||this.VO.at_.gapSegmentMode?this.playHead!==this.previousPlayhead&&(this.VO.at_.vpS[this.VO.at_.vpS.length-1][3]+=this.externalTimeStamp-this.previousTimeStamp):this.VO.at_.vpS.push([a,this.playHead,this.UTCSec,1])}catch(t){throw t.code=3015,t}},e.prototype.nviManageElementSizeSeries=function(){try{var t=0,i=0;this.omsdkMode?(t=this.omsdkPlayerSize[0],i=this.omsdkPlayerSize[1]):(t=this.VO.at_.adNode.clientWidth,i=this.VO.at_.adNode.clientHeight),isNaN(Math.round(t))&&(t=-1,i=-1);var e=Math.round(t)+"x"+Math.round(i);if("-1x-1"===this.VO.at_.esS[0][0])this.VO.at_.esS[0][0]=e;else e===this.VO.at_.esS[this.VO.at_.esS.length-1][0]||this.VO.at_.gapSegmentMode?this.playHead!==this.previousPlayhead&&(this.VO.at_.esS[this.VO.at_.esS.length-1][3]+=this.externalTimeStamp-this.previousTimeStamp):this.VO.at_.esS.push([e,this.playHead,this.UTCSec,1])}catch(t){throw t.code=3016,t}},e.prototype.nviFixCLN=function(){var t=this.nviSeriesDuration(this.VO.at_.vS);if(this.VO.at_.bsdkMethod&&(t=this.VO.at_.extGapCount,this.VO.at_.vS.length>0)){var i=this.nviSeriesDuration(this.VO.at_.vS)-t;this.VO.at_.vS[this.VO.at_.vS.length-1][3]=this.VO.at_.vS[this.VO.at_.vS.length-1][3]-i}if(this.VO.at_.aS.length>0){var e=this.nviSeriesDuration(this.VO.at_.aS)-t;this.VO.at_.aS[this.VO.at_.aS.length-1][3]=this.VO.at_.aS[this.VO.at_.aS.length-1][3]-e}if(this.VO.at_.vpS.length>0){i=this.nviSeriesDuration(this.VO.at_.vpS)-t;this.VO.at_.vpS[this.VO.at_.vpS.length-1][3]=this.VO.at_.vpS[this.VO.at_.vpS.length-1][3]-i}if(this.VO.at_.esS.length>0){var s=this.nviSeriesDuration(this.VO.at_.esS)-t;this.VO.at_.esS[this.VO.at_.esS.length-1][3]=this.VO.at_.esS[this.VO.at_.esS.length-1][3]-s}},e.prototype.nviFixUTC=function(){this.VO.at_.vS.length>0&&(this.VO.at_.vS[0][2]=this.VO.at_.vpS[0][2]),this.VO.at_.aS.length>0&&(this.VO.at_.aS[0][2]=this.VO.at_.vpS[0][2])},e.prototype.nviRestartSeries=function(){this.RE&&(0!==this.VO.at_.vS.length&&(this.VO.at_.vS[this.VO.at_.vS.length-1][3]=1,this.VO.at_.aS[this.VO.at_.aS.length-1][3]=1,this.VO.at_.vpS[this.VO.at_.vpS.length-1][3]=1,this.VO.at_.esS[this.VO.at_.esS.length-1][3]=1,this.VO.at_.vpS[this.VO.at_.vpS.length-1][1]=this.VO.at_.vS[this.VO.at_.vS.length-1][1],this.VO.at_.esS[this.VO.at_.esS.length-1][1]=this.VO.at_.vS[this.VO.at_.vS.length-1][1]),this.RE=!1)},e.prototype.nviCalculateTotals=function(){for(var t=0;t<this.VO.at_.ratio.length;t++)100*this.VO.at_.ratio[t]<=this.latestWatermark&&this.intSeries[t].total++,this.VO.at_.totals[this.VO.at_.ratio[t]]=this.intSeries[t].total},e.prototype.nviWriteDiagnostics=function(t){this.nviAddDiagnostic("######"),this.nviAddDiagnostic("UTC: "+this.UTCSec+" API runtime: "+t),this.nviAddDiagnostic("resetMeasurement: "+this.diagnostic.rm),this.nviAddDiagnostic("Gap Mode: "+this.VO.at_.gapSegmentMode),this.nviAddDiagnostic("VI Event: "+this.diagnostic.ve),this.nviAddDiagnostic("Update Tick: "+this.diagnostic.ut),this.nviAddDiagnostic("Playhead: "+this.diagnostic.ph);var i=0;0!==this.VO.at_.vS.length&&(i=this.VO.at_.vS[this.VO.at_.vS.length-1][3]),this.nviAddDiagnostic("Video Series CLN: "+i),this.nviAddDiagnostic("Viewable: "+this.diagnostic.vv),this.nviAddDiagnostic("Volume: "+this.diagnostic.vo),this.diagnostic.ve=!1,this.diagnostic.vv=0,this.diagnostic.ut=!1,this.diagnostic.ph=-1,this.diagnostic.vo=-1,this.diagnostic.rm=!1},e.prototype.nviErrorPixel=function(t){if(this.VO.at_.stopReason.code=2,this.VO.at_.stopReason.errorCode=t.code,this.VO.at_.stopReason.message=t.message,this.VO.triggerEvent("VIStopped"),0===this.VO.at_.silent){var i=this.basePix+"er?ca=73817&er="+t.code+"&em="+escape(window.nvi_APIVersion+"-a-"+(this.omsdkMode?"OMS":"WEB")+"-"+(this.uaModes.mobileMode?"MOB":"DSK")+"-"+(this.uaModes.safariMode?"SAF":"OTH")+"-"+t.message).substring(0,1e3)+"&r="+Math.floor(1e3*Math.random());if(""===this.VO.at_.omSDKVersion)new Image(1,1).src=i;else this.omid.sendUrl(i)}},e.prototype.nviGetUTCSec=function(){return Math.floor(Date.now()/1e3)},e.prototype.nviAddDiagnostic=function(t){this.VO.at_.diagnostic.length<this.diagnosticMax?this.VO.at_.diagnostic+=t+"\n":-1===this.VO.at_.diagnostic.indexOf(this.diagnosticMaxMsg)&&(this.VO.at_.diagnostic+="#################\n"+this.diagnosticMaxMsg)},e.prototype.nviSeriesDuration=function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e][3];return i},e.prototype.nviTimeSeriesAdd=function(t,i,e){try{for(var s=0;s<this.intSeries.length;s++)this.intSeries[s].ratio===this.VO.at_.ratio[t]&&(this.intSeries[s].next=i,this.intSeries[s].count=e)}catch(t){t.code=3005,this.nviErrorPixel(t)}},e.prototype.nviTimeSeriesCommit=function(t,i){try{var e=this.intSeries[t].series.length-1;if(-1===e||this.intSeries[t].series[e][0]!==i){var s=(new Date).getTime()-this.startTimestamp;this.intSeries[t].series.push([i,s]),this.intSeries[t].primary&&(1===i?(0===this.VO.at_.timeToViewable&&(this.VO.at_.timeToViewable=s),this.VO.at_.currentVIState=1,this.VO.triggerEvent("VIInView")):(this.VO.at_.currentVIState=0,this.VO.triggerEvent("VIOutOfView")))}}catch(t){t.code=3006,this.nviErrorPixel(t)}},e.prototype.nviAppendSeries=function(t,i,e,s,a){if(t){var h="vS"===t?this.nviGetLatestWatermark():this.VO.at_.tickVolume[this.VO.at_.tickVolume.length-1];this.VIMeasurementDisabled||-1!==h||(h=0),a?(i&&this.VO.at_[t].push(i),this.VO.at_[t].push(e)):h===(i=i||this.VO.at_[t].pop())[0]?(i[3]+=s||0,this.VO.at_[t].push(i)):(this.VO.at_[t].push(i),e&&this.VO.at_[t].push(e))}},e.prototype.nviOmSDKSetup=function(){try{null===this.VO.at_.omSDKHandle?this.omid=new window.OmidVerificationClient[this.VO.at_.omSDKVersion]:this.omid=this.VO.at_.omSDKHandle,this.omid.addEventListener("geometryChange",this.nviOmSDKChange.bind(this))}catch(t){this.omsdkInitCount>4&&(t.code=3011,this.nviErrorPixel(t))}},e.prototype.nviOmSDKChange=function(t){try{if(this.omsdkFirstRun)for(var i=0;i<this.intSeries.length;i++)this.intSeries[i].series=[];for(var e=t.data.adView.percentageInView,s=0;s<this.VO.at_.ratio.length;s++)e/100>=this.VO.at_.ratio[s]?this.nviTimeSeriesAdd(s,1,0):this.nviTimeSeriesAdd(s,0,0);if(void 0!==t.data.viewport?(this.omsdkViewport[0]=Math.round(t.data.viewport.width),this.omsdkViewport[1]=Math.round(t.data.viewport.height)):(this.omsdkViewport[0]=0,this.omsdkViewport[1]=0),void 0!==t.data.adView.geometry?(this.omsdkPlayerSize[0]=Math.round(t.data.adView.geometry.width),this.omsdkPlayerSize[1]=Math.round(t.data.adView.geometry.height)):(this.omsdkPlayerSize[0]=0,this.omsdkPlayerSize[1]=0),this.omsdkFirstRun){this.VO.at_.vS=[],this.VO.at_.aS=[],this.omsdkFirstRun=!1;var a=this.nviGetUTCSec();this.VO.at_.vpS=[],this.VO.at_.viewportSize=[],this.VO.at_.viewportSize.push(this.omsdkViewport[0]),this.VO.at_.viewportSize.push(this.omsdkViewport[1]);var h=this.omsdkViewport[0]+"x"+this.omsdkViewport[1];this.VO.at_.vpS.push([h,0,a,0]),this.VO.at_.esS=[];var n=this.omsdkPlayerSize[0]+"x"+this.omsdkPlayerSize[1];this.VO.at_.esS.push([n,0,a,0])}this.diagnostic.ve=!0}catch(t){t.code=3010,this.nviErrorPixel(t)}},e.prototype.nviGeoChange=function(i){var e=function(){var t,i;return self.pageYOffset?(t=self.pageXOffset,i=self.pageYOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollLeft,i=document.documentElement.scrollTop):document.body&&(t=document.body.scrollLeft,i=document.body.scrollTop),[t,i]}(),s=e[0],a=e[1],h=t(this.VO),n=h[0],o=h[1];try{for(var r=i.getBoundingClientRect(),d=r.top+a,p=r.bottom+a,l=r.left+s,S=r.right+s,V=r.width*r.height,v=100/V*(((a+o<p?a+o:p)-(a>d?a:d))*((s+n<S?s+n:S)-(s>l?s:l))),c=0;c<this.VO.at_.ratio.length;c++)v/100>=this.VO.at_.ratio[c]?this.nviTimeSeriesAdd(c,1,0):this.nviTimeSeriesAdd(c,0,0);this.diagnostic.ve=!0}catch(t){t.code=3004,this.nviErrorPixel(t)}},e.prototype.nviIntersectionChange=function(t){var i=this;try{t.forEach(function(t){t.target;for(var e=0;e<i.VO.at_.ratio.length;e++){var s=i.VO.at_.ratio[e];if(1===s&&(s=.99),t.intersectionRatio>=s){if(i.VO.at_.tagWasSuspended)for(var a=0;a<i.intSeries.length;a++)i.intSeries[a].ratio===i.VO.at_.ratio[e]&&0===i.intSeries[a].series.length&&(i.nviTimeSeriesCommit(a,0),i.intSeries[a].count=0,i.intSeries[a].next=null);i.nviTimeSeriesAdd(e,1,0)}else i.nviTimeSeriesAdd(e,0,0)}}),this.diagnostic.ve=!0}catch(t){t.code=3007,this.nviErrorPixel(t)}},e.prototype.nviThrottlingDetection=function(){try{var t=0,i=0;for(var e in this.renderSensorStatus)this.renderSensorStatus.hasOwnProperty(e)&&("x"===e.charAt(0)&&1===this.renderSensorStatus[e]&&t++,"y"===e.charAt(0)&&1===this.renderSensorStatus[e]&&i++,this.renderSensorStatus[e]=1);var s=0,a=0;i>0&&(a=10*(i-1)),i>5&&t++;var h=0;t>0&&(h=10*(t-1)),(s=a)<100&&h>0&&h<100&&(s=h*a/100),0===a&&t>0&&(s=h);for(var n=0;n<this.VO.at_.ratio.length;n++)this.VO.at_.tagWasSuspended&&0===this.intSeries[n].series.length&&(this.nviTimeSeriesCommit(n,0),this.intSeries[n].count=0,this.intSeries[n].next=null),s/100>=this.VO.at_.ratio[n]?this.nviTimeSeriesAdd(n,1,0):(this.nviTimeSeriesCommit(n,0),this.intSeries[n].count=0,this.intSeries[n].next=null)}catch(t){t.code=3008,this.nviErrorPixel(t)}},e.prototype.VIScrollHandler=function(){var t=this.VO.at_.adNode;if(this.viewableJSscrollBlock)this.viewableJSscrollMissed=!0;else{this.nviGeoChange(t),this.viewableJSscrollBlock=!0;setTimeout(function(){this.viewableJSscrollMissed&&(this.viewableJSscrollMissed=!1,this.nviGeoChange(t)),this.viewableJSscrollBlock=!1},250)}},e.prototype.nviInitDetection=function(){var i=this;try{var e=this.VO.at_.adNode;if(this.VO.at_.width>=30&&this.VO.at_.height>=30){if(""!==this.VO.at_.omSDKVersion)this.VO.at_.method="om",this.nviOmSDKSetup(),this.omsdkMode=!0;else if(this.VO.at_.viewportSize=t(this.VO),this.VO.at_.inIframe){var s=!1;if(this.uaModes.safariMode&&!this.IOAPIOK){this.VO.at_.method="rt",s=!0;var a="";a='<p id="v1"></p>',a+="<script>",a+="'use strict';",a+="function rn() {",a+="var ct = performance.now();",a+="var diff = ct - prevTime;",a+="if(diff<70 && diff>1){",a+="ivt += diff;",a+="}",a+="prevTime = ct;",a+="var v = Math.floor((Math.random() * 10000) + 1);",a+="_txt.nodeValue = v;",a+="requestAnimationFrame(rn);",a+="}",a+="function rf() {",a+="if (ivtBuf==Math.round(ivt)) {",a+="parent.postMessage('"+this.nvi_id+"|outofview|SENSORID','*');",a+="}",a+="ivtBuf=Math.round(ivt);",a+="}",a+="var _dom = document.createElement('div');",a+="_dom.style.position = 'absolute';",a+="_dom.style.left = '-1000px';",a+="_dom.style.top = '10px';",a+="var _txt=document.createTextNode('');",a+="_dom.appendChild(_txt);",a+="document.body.appendChild(_dom);",a+="var ivt=0, ivtBuf=0, prevTime=0;",a+="rn();",a+="setInterval(rf, LOOP);",a+="<\/script>";for(var h=90,n=this.VO.at_.width/10,o=this.VO.at_.height/10,r=0;r<=100;r+=10){if(50!==r)100===(d=r)&&(d=99),(p=this.d.createElement("iframe")).style.width="1px",p.style.height="1px",p.style.border="none",p.style.position="absolute",p.style.top=Math.floor(this.VO.at_.height/2)+"px",p.style.left=Math.floor(d*n/10)+"px",p.setAttribute("id","NVISAFARIY"+r),this.d.body.insertBefore(p,this.VO.adNode),p.contentDocument.open(),p.contentDocument.write(a.replace(/SENSORID/,"x"+r).replace(/LOOP/,h.toString())),p.contentDocument.close(),h++}for(r=0;r<=100;r+=10){var d,p;100===(d=r)&&(d=99),(p=document.createElement("iframe")).style.width="1px",p.style.height="1px",p.style.border="none",p.style.position="absolute",p.style.top=Math.floor(d*o/10)+"px",p.style.left=Math.floor(this.VO.at_.width/2)+"px",p.setAttribute("id","NVISAFARIX"+r),this.d.body.insertBefore(p,this.VO.adNode),p.contentDocument.open(),p.contentDocument.write(a.replace(/SENSORID/,"y"+r).replace(/LOOP/,h.toString())),p.contentDocument.close(),h++}this.renderSensorStatus.x0=1,this.renderSensorStatus.x10=1,this.renderSensorStatus.x20=1,this.renderSensorStatus.x30=1,this.renderSensorStatus.x40=1,this.renderSensorStatus.x60=1,this.renderSensorStatus.x70=1,this.renderSensorStatus.x80=1,this.renderSensorStatus.x90=1,this.renderSensorStatus.x100=1,this.renderSensorStatus.y0=1,this.renderSensorStatus.y10=1,this.renderSensorStatus.y20=1,this.renderSensorStatus.y30=1,this.renderSensorStatus.y40=1,this.renderSensorStatus.y50=1,this.renderSensorStatus.y60=1,this.renderSensorStatus.y70=1,this.renderSensorStatus.y80=1,this.renderSensorStatus.y90=1,this.renderSensorStatus.y100=1,setInterval(this.nviThrottlingDetection,1e3),this.nviThrottlingDetection()}if(this.IOAPIOK){this.VO.at_.method="io",s=!0;for(var l=0;l<this.VO.at_.ratio.length;l++){this.nviTimeSeriesAdd(l,0,0);var S=this.VO.at_.ratio[l];1===S&&(S=.99),this.intSeries[l].observer=new IntersectionObserver(this.nviIntersectionChange.bind(this),{threshold:[S]}),void 0!==e?this.intSeries[l].observer.observe(e):(this.VIMeasurementDisabled=!0,this.VO.triggerEvent("VINotMeasured"),this.VO.at_.stopReason.code=1,this.VO.at_.stopReason.errorCode=5,this.VO.at_.stopReason.message="The Ad Node has been removed prematurely",this.VO.triggerEvent("VIStopped"))}}s||(this.VIMeasurementDisabled=!0,this.VO.triggerEvent("VINotMeasured"),this.VO.at_.stopReason.code=1,this.VO.at_.stopReason.errorCode=1,this.VO.at_.stopReason.message="Could not implement VI solution",this.VO.triggerEvent("VIStopped"))}else this.VO.at_.method="ge",window.addEventListener("scroll",function(t){i.VIScrollHandler()}),window.addEventListener("resize",function(t){i.VIScrollHandler()}),this.nviGeoChange(e);this.nviAddDiagnostic("Measurement Method: "+this.VO.at_.method)}else this.VIMeasurementDisabled=!0,this.VO.triggerEvent("VINotMeasured"),this.VO.at_.stopReason.code=1,this.VO.at_.stopReason.errorCode=2,this.VO.at_.stopReason.message="Ad slot too small",this.VO.triggerEvent("VIStopped")}catch(t){t.code=3001,this.nviErrorPixel(t)}},e.prototype.nviSuspensionTest=function(){this.suspendedTime=(new Date).getTime()-window.nvi_suspensionTimestamp,this.suspendedTime>100+this.uaModes.suspendedTimeOffset&&(this.VO.at_.tagWasSuspended=!0),this.nviAddDiagnostic("externalTick: "+this.VO.at_.externalTick),this.nviAddDiagnostic("tickOffset: "+this.VO.at_.tickOffset),this.nviAddDiagnostic("ffThreshold: "+this.VO.at_.ffThreshold),this.nviInitDetection()},e.prototype.nviGetLatestWatermark=function(){for(var t=-1,i=0;i<this.VO.at_.ratio.length;i++)null!==this.intSeries[i].next&&(this.intSeries[i].count++,this.intSeries[i].count>=200/this.pollspeed&&(this.nviTimeSeriesCommit(i,this.intSeries[i].next),this.intSeries[i].count=0,this.intSeries[i].next=null)),0!==this.intSeries[i].series.length&&1===this.intSeries[i].series[this.intSeries[i].series.length-1][0]&&100*this.intSeries[i].ratio>t&&(t=Math.floor(100*this.intSeries[i].ratio));return""===this.VO.at_.omSDKVersion&&this.nviGetDocumentHidden()&&(t=0),t},e.prototype.nviGetDocumentHidden=function(){var t=!1;return 1===this.VO.at_.visibility&&void 0!==document.hidden&&document.hidden&&(this.VIMeasurementDisabled||(t=!0)),t},e.prototype.nviRunLoop=function(t){return""===this.VO.at_.omSDKVersion?setTimeout(t.bind(this),this.pollspeed):this.omid.setTimeout(t.bind(this),this.pollspeed)},e}(),s=function(){return function(){this.adNode=null,this.instantOn=1,this.silent=0,this.visibility=1,this.externalTick=0,this.height=0,this.width=0,this.tickOffset=0,this.ffThreshold=2,this.startCLN=1,this.volume=100,this.currentVIState=0,this.currentThreshold=0,this.timeToViewable=0,this.tagWasSuspended=!1,this.stopped=!1,this.ratio=[.5],this.timeSeriesMax=86400,this.tickCount=0,this.tickGapCount=0,this.extTickCount=0,this.extGapCount=0,this.gapSegmentMode=!1,this.tickPlayhead=[],this.tickVolume=[],this.totals={},this.vS=[],this.aS=[],this.vpS=[],this.esS=[],this.viewportSize=[],this.method="",this.inIframe=!1,this.omSDKVersion="",this.omSDKHandle=null,this.timeSeriesMaxEventFired=!1,this.resetReceived=!1,this.diagnostic="",this.stopReason={code:null,errorCode:null,message:null},this.forceViewport=0}}(),a=function(){function t(){this.id=Math.floor(1e6*Math.random()),this.tagLock={initVI:!0,startVI:!0},this.adNode=null,this.at_=new s,this.eventCallbacks_={}}return t.prototype.triggerEvent=function(t){"function"==typeof this.eventCallbacks_[t]&&this.eventCallbacks_[t]()},t.prototype.initVI=function(t){this.tagLock.initVI&&void 0!==t&&void 0!==t.node&&(this.at_.bsdkMethod=t.bsdkMethod||"",this.tagLock.initVI=!1,this.at_.adNode=t.node,void 0!==t.ratio?("number"==typeof t.ratio&&(this.at_.ratio=[],this.at_.ratio.push(t.ratio)),"object"==typeof t.ratio&&(this.at_.ratio=t.ratio)):this.at_.ratio=[.5],void 0!==t.omSDKVersion&&""!==t.omSDKVersion&&(this.at_.omSDKVersion=t.omSDKVersion,t.width=30,t.height=30),void 0!==t.omSDKHandle&&(this.at_.omSDKHandle=t.omSDKHandle),void 0!==t.width?this.at_.width=t.width:this.at_.width=t.node.offsetWidth,void 0!==t.height?this.at_.height=t.height:this.at_.height=t.node.offsetHeight,void 0!==t.instantOn&&(this.at_.instantOn=t.instantOn),void 0!==t.tickOffset&&(this.at_.tickOffset=t.tickOffset),void 0!==t.ffThreshold&&(this.at_.ffThreshold=t.ffThreshold),void 0!==t.volume&&(this.at_.volume=t.volume),void 0!==t.silent&&(this.at_.silent=t.silent),void 0!==t.visibility&&(this.at_.visibility=t.visibility),void 0!==t.externalTick&&(this.at_.externalTick=t.externalTick),void 0!==t.timeSeriesMax&&(this.at_.timeSeriesMax=t.timeSeriesMax),void 0!==t.forceViewport&&(this.at_.forceViewport=t.forceViewport),void 0!==t.startCLN?this.at_.startCLN=t.startCLN:void 0!==t.omSDKVersion&&""!==t.omSDKVersion&&(this.at_.startCLN=0),this.triggerEvent("VIInitialized"),1===this.at_.instantOn&&this.tagLock.startVI&&(this.tagLock.startVI=!1,this.nielsenViewablity(this,!1),this.triggerEvent("VIStarted")))},t.prototype.startVI=function(){if(this.tagLock.startVI&&0===this.at_.instantOn){this.tagLock.startVI=!1;var t=!1;this.at_.stopped&&(this.at_.stopped=!1,this.at_.tickCount=1,t=!0),this.nielsenViewablity(this,t),this.triggerEvent("VIStarted")}},t.prototype.stopVI=function(){this.at_.stopped=!0,this.tagLock.startVI=!0,this.at_.instantOn=0},t.prototype.getCurRatio=function(){return this.at_.currentThreshold},t.prototype.getVIState=function(){return this.at_.currentVIState},t.prototype.getTimeToVI=function(){return this.at_.timeToViewable},t.prototype.getVideoSeries=function(){return this.at_.vS},t.prototype.getAudioSeries=function(){return this.at_.aS},t.prototype.getViewportSeries=function(){return this.at_.vpS},t.prototype.getElementSizeSeries=function(){return this.at_.esS},t.prototype.getOnscreenTotal=function(t){return this.at_.totals.ratio},t.prototype.updateExternalTick=function(){this.tagLock.startVI||(this.at_.extTickCount++,this.at_.extGapCount++)},t.prototype.updateTick=function(t,i){-1!==t&&(this.at_.tickCount++,this.at_.tickGapCount=0,this.at_.extTickCount=0,null!==t?this.at_.tickPlayhead.push(t):0===this.at_.tickPlayhead.length?this.at_.tickPlayhead.push(0):this.at_.tickPlayhead.push(this.at_.tickPlayhead[this.at_.tickPlayhead.length-1]+1),null!==i?this.at_.tickVolume.push(Math.round(i)):this.at_.tickVolume.push(100))},t.prototype.resetMeasurement=function(){this.at_.timeToViewable=0,this.at_.tickCount=0,this.at_.tickPlayhead=[],this.at_.tickVolume=[],this.at_.totals=[],this.at_.timeSeriesMaxEventFired=!1,this.at_.tickGapCount=0,this.at_.extTickCount=0,this.at_.extGapCount=0,this.at_.gapSegmentMode=!1,this.at_.resetReceived=!0},t.prototype.getSuspensionState=function(){return this.at_.tagWasSuspended?1:0},t.prototype.getViewportSize=function(){return this.at_.viewportSize},t.prototype.getMethod=function(){return this.at_.method},t.prototype.getIframeStatus=function(){return this.at_.inIframe},t.prototype.getDiagnostic=function(){return this.at_.diagnostic},t.prototype.getReason=function(){return this.at_.stopReason},t.prototype.getVersion=function(){return window.nvi_APIVersion},t.prototype.subscribe=function(t,i,e){var s=t.bind(e);this.eventCallbacks_[i]=s},t.prototype.unsubscribe=function(t){this.eventCallbacks_[t]=null},t.prototype.nielsenViewablity=function(t,i){return new e(t,i)},t}();window.nvi_APIVersion="1.3.1",window.nvi_suspensionTimestamp=(new Date).getTime(),window.getVIAPI=function(){return new a},"object"==typeof window.wrp&&(window.wrp.getVIAPI=window.getVIAPI)}();
